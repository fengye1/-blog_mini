{% extends 'admin/admin_base.html' %}
{% import '_macros.html' as macros %}

{% block title %}
    Blog_mini-分类导航
{% endblock %}

{% block admin_content %}
    <div class="entry-box manage-articleTypes-nav">
        <h4><strong>分类导航</strong></h4>
        <hr/>
        <p><span class="glyphicon glyphicon-bookmark"></span>导航总数：<span class="badge">{{ Menu.query.count() }}</span>
        </p>
        <div class="articleTypes-nav-box">
            <ul class="nav nav-tabs">
                <li class=""><a href="{{ url_for('admin.manage_articleTypes') }}">博文分类</a></li>
                <li class="active"><a href="{{ url_for('admin.manage_articleTypes_nav') }}">分类导航</a></li>
            </ul>
            <div class="articleTypes-nav" id='articleTypesNav'>
                <table class="table table-striped table-hover">
                    <thead>
                    <tr class="table-header">
                        <th>序号</th>
                        <th>导航名称</th>
                        <th>所含分类</th>
                        <th>排序</th>
                        <th>修改</th>
                        <th>删除</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for menu in menus %}
                        <tr>
                            <td>{{ menu.order }}</td>
                            <td>{{ menu.name }}</td>
                            <td>
                                {% if menu.types.count() %}
                                    {% for aritcleType in menu.types.all() %}
                                        <a href="{{ url_for('main.articleTypes', id=aritcleType.id) }}" target="_blank">
                                            {{ aritcleType.name }}
                                        </a>
                                    {% endfor %}
                                {% else %}
                                    没有分类，该导航将不显示。
                                {% endif %}
                            </td>
                            <td>
                                {#                            <a class="btn sort-up" title="升序"#}
                                {#                               href="{{ url_for('admin.nav_sort_up', id=menu.id, page=page) }}">#}
                                <span class="glyphicon glyphicon-circle-arrow-up"></span>
                                </a>
                                {#                            <a class="btn sort-down" title="降序"#}
                                {#                               href="{{ url_for('admin.nav_sort_down', id=menu.id, page=page) }}">#}
                                <span class="glyphicon glyphicon-circle-arrow-down"></span>
                                </a>
                            </td>
                            <td>
                                {#                            <a class="btn" title="修改导航信息"#}
                                {#                               onclick="get_articleTypeNav_info('{{ url_for('admin.get_articleTypeNav_info', id=menu.id) }}')">#}
                                <span class="glyphicon glyphicon-edit"></span>
                                </a>
                            </td>
                            <td>
                                {#                            <a class="btn btn-sm btn-default delete-articleType-nav" title="删除导航"#}
                                {#                               onclick="delArticleTypeNavCfm('{{ url_for('admin.delete_nav', id=menu.id, page=page) }}')">#}
                                <span class="glyphicon glyphicon-trash"></span>
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="add-articleType-nav">
                  <a class="btn btn-sm btn-primary add-articleType-nav-btn">
                    <span class="glyphicon glyphicon-plus-sign"></span>
                    添加导航
                </a>
            </div>
        </div>
        <div class="pagination">
            {{ macros.pagination_widget(pagination,endpoint) }}
        </div>
    </div>
{% endblock %}